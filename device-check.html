<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Device Camera/HTTPS Check</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#0b0b0b;color:#fff}
    main{max-width:820px;margin:0 auto;padding:24px}
    video{width:100%;max-height:60vh;background:#111;border-radius:12px}
    .row{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    button{padding:10px 12px;border-radius:10px;border:1px solid #333;background:#111;color:#fff}
    .log{white-space:pre-wrap;background:#111;padding:12px;border-radius:12px;margin-top:12px}
    a{color:#a8d1ff}
  </style>
</head>
<body>
<main>
  <h1>Device Check</h1>
  <p>Dieses Tool prüft Kamera-Zugriff & HTTPS Umgebung.</p>
  <div class="row">
    <button onclick="start()">Kamera starten</button>
    <button onclick="stop()">Kamera stoppen</button>
  </div>
  <video id="v" playsinline autoplay muted></video>
  <div class="log" id="log"></div>
  <p>Offizielle MindAR-Demo (Vergleich): 
     <a href="https://hiukim.github.io/mind-ar-js-doc/examples/image-tracking/" target="_blank">Image Tracking Example</a></p>
</main>
<script>
  let stream;
  function log(msg){ document.getElementById('log').textContent += msg + '\n'; }
  async function start(){
    try{
      const isHTTPS = location.protocol === 'https:' || location.hostname === 'localhost';
      log('HTTPS/localhost: ' + isHTTPS);
      stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' }, audio: false });
      document.getElementById('v').srcObject = stream;
      log('Camera OK ✅');
    }catch(e){
      log('Camera ERROR ❌: ' + e.message);
    }
  }
  function stop(){
    if(stream){ stream.getTracks().forEach(t => t.stop()); stream = null; log('Camera stopped'); }
  }
</script>
</body>
</html>
